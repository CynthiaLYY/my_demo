<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>web album</title>
	<link rel="stylesheet" href="animate.css">
	<style type="text/css">
		blockquote, body, button, dd, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, hr, input, legend, li, ol, p, pre, td, textarea, th, ul,img{
		margin: 0;
		padding: 0;
		}
		body{
			background-color: black;
		}
		ul{
			list-style: none;
		}
		li{
			width: 100px;
			height: 100px;
			float: left;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<ul class="img-container" id="container">
	</ul>
	<script src="zepto.min.js"></script>
	<script>
		var total = 17;
		var zWin = $(window);
		var render = function(){
			var padding = 2;
			var winWidth = zWin.width();
			var picWidth = Math.floor(winWidth - padding*3)/4;
			var tmpl = '';
			for(var i = 1; i <= total; i++){
				var p = padding;
				var imgSrc = 'img/' + i + '.jpg';
				if(i%4 == 1){
					p = 0;
				}
				tmpl += '<li style="width:' + picWidth + 'px; height:' +  picWidth + 'px; padding-top:' +  padding + 'px; padding-left:' +  p + 'px;"><canvas id="cvs_' + i + '"></canvas></li>';
				var imageObj = new Image();
				imageObj.index = i;
				imageObj.onload = function(){
					var cvs = $('#vrs_' + this.index)[0].getContext('2d');
					cvs.width = this.width;
					cvs.height = this.height;
					cvs.drawImage(this, 0, 0);
				};
				imageObj.src = imgSrc;
			}

			$('#container').html(tmpl);
		};

		render();
	</script>	
</body>
</html>